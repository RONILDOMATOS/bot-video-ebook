def postar_video_facebook(ebook, mensagem, video_path):
    """Posta v√≠deo no Facebook usando upload resumable"""
    try:
        print(f"\nüì§ Iniciando upload no Facebook...")
        
        # Passo 1: Iniciar sess√£o de upload
        init_url = f'https://graph.facebook.com/v24.0/{PAGE_ID}/videos'
        
        file_size = os.path.getsize(video_path)
        
        init_payload = {
            'upload_phase': 'start',
            'file_size': file_size,
            'access_token': ACCESS_TOKEN
        }
        
        init_response = requests.post(init_url, data=init_payload, timeout=30)
        
        if init_response.status_code != 200:
            print(f'‚ùå Erro ao iniciar upload: {init_response.json()}')
            return False
        
        upload_session_id = init_response.json().get('upload_session_id')
        video_id = init_response.json().get('video_id')
        
        print(f"   ‚úÖ Sess√£o iniciada: {upload_session_id}")
        
        # Passo 2: Upload do arquivo
        print(f"   üì§ Fazendo upload ({file_size} bytes)...")
        
        with open(video_path, 'rb') as video_file:
            transfer_payload = {
                'upload_phase': 'transfer',
                'upload_session_id': upload_session_id,
                'start_offset': 0,
                'access_token': ACCESS_TOKEN
            }
            
            files = {'video_file_chunk': video_file}
            
            transfer_response = requests.post(
                init_url,
                data=transfer_payload,
                files=files,
                timeout=180
            )
        
        if transfer_response.status_code != 200:
            print(f'‚ùå Erro no upload: {transfer_response.json()}')
            return False
        
        print(f"   ‚úÖ Upload conclu√≠do")
        
        # Passo 3: Finalizar e publicar
        print(f"   üì¢ Publicando...")
        
        finish_payload = {
            'upload_phase': 'finish',
            'upload_session_id': upload_session_id,
            'description': mensagem,
            'access_token': ACCESS_TOKEN
        }
        
        finish_response = requests.post(init_url, data=finish_payload, timeout=30)
        
        if finish_response.status_code == 200:
            result = finish_response.json()
            print(f'‚úÖ V√≠deo publicado!')
            print(f'   Sucesso: {result.get("success")}')
            return True
        else:
            print(f'‚ùå Erro ao finalizar: {finish_response.json()}')
            return False
        
    except Exception as e:
        print(f'‚ùå Erro: {e}')
        import traceback
        traceback.print_exc()
        return False
